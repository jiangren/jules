# 第7课：神奇开关 (Magic Toggle)

上一课的按钮必须一直按着才亮，太累了。能不能像家里的电灯开关一样，按一下开，再按一下关？

## 🎯 目标
学习“边缘检测”（Detecting the edge），即检测按下的**瞬间**，而不是检测按下的**状态**。

## 🛠 硬件清单
*   Arduino Uno 主板
*   大轻触按键 x 1
*   杜邦线

## 🔌 接线说明
同第6课：
**按键 -> Pin 2**
**按键 -> GND**

## 🧩 玩耍指南 (给小朋友)
1.  **动作**：快速按一下按钮然后松手。
2.  **现象**：灯亮并保持住！
3.  **动作**：再按一下。
4.  **现象**：灯关掉了。
5.  **魔法**：“看，我施了魔法，不用手按着它也亮！”

## 💻 代码解析 (给大人)

### 核心难点
1.  **为什么要记 `lastButtonState`？**
    *   Arduino 运行速度极快（一秒钟跑几十万次 loop）。
    *   如果你只写 `if (button == LOW) toggle()`，当你按下的这 0.1 秒里，Arduino 可能会执行几千次“切换”，灯就会看起来像在乱闪。
    *   所以我们要比较：**只有当“上次没按”且“这次按了”的那一瞬间**，才执行一次切换。

2.  **去抖动 (Debounce)**:
    *   真实的物理按键在闭合瞬间会产生微小的火花或抖动。`delay(50)` 是最简单的“忽略抖动”的方法。

### 挑战一下
把这个逻辑用到第2课的红绿灯上？按一下按钮，红绿灯就开始自动跑；再按一下，就全部熄灭停止？
